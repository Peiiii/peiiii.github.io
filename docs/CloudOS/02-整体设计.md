# 整体设计

---

### 如何设计

> 设计是什么？

尽可能的想象并描述出系统的全貌。先描述主体的关键的部分，再描述微末的次要的部分。再将这些描述按一定的结构组织起来。 组织的方法是辨别实体之间的关系（并列关系，层级关系，类和对象的关系，先后关系等）。

### 头脑风暴

- 平台资源层

  - 通用存储资源池
  - 通用计算资源池
  - 专用服务资源池
  - 外部第三方资源调用支持
    - 免费文件存储、免费数据库、免费 json 存储、免费代码托管平台
    - 免费有用的 api

- 基于此平台构建 web 应用的方法

  - 静态文件托托管于开放读的存储资源，如对象存储
  - 充分利用专用服务资源和外部服务资源以减少服务开发
  - 开发自己的服务并部署到通用计算资源池中

- 云计算机网络

  - 每个用户就是一个节点
  - 每个节点对应着用户信息、数据、计算、服务

- 用户系统基础资源配置

  - 数据存储资源
    - 文件系统
  - 通用计算资源
    - 无
  - 专用服务资源
    - 信息推送服务（消息中转服务）
  - 第三方资源整合
    - 免费对象存储
    - 免费数据库
    - 免费 json 存储/免费文本存储

- 文件系统设计

  - 文件网关：
    - 文件读写
    - 文件上传、下载
  - 高频读写小文件：nas
  - 不常写大文件：对象存储(文件去重)
  - 开放读文件：对象存储
  - 共享文件夹：nas

- 用户认证
  - 前端
  - 后端
- SDK

  - ipc
  - 用户登录 sdk
  - 用户信息接口 sdk
  - 系统信息接口 sdk
  - 文件系统 sdk
  - 其它服务 sdk

- 微服务架构

  - API 网关

- 服务端

  - 认证和鉴权服务
  - 通用计算服务

    - 函数计算
    - 容器服务

  - 通用数据服务

    - 文件
      - NAS、对象存储、块存储
    - 数据库
    - json 存储，文本存储等

  - 专用服务

    - 高性能计算
    - 数据服务
    - 其它云计算厂商提供的服务
      - 短信验证码等

# 系统设计原则

- 高内聚、低耦合
- 设计后再开发
  - 再开发之前，前设计出一个可行的方案
