<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.24">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><meta name="theme-color" content="#ffffff"><meta name="google-site-verification"><title>é˜²ç«å¢™ firewalld | Peiiiiçš„ä¸ªäººç½‘ç«™</title><meta name="description" content="ä¼Ÿå¤§çš„å¾ç¨‹å¿…å®šå……æ»¡è†æ£˜ä¸åå·">
    <link rel="modulepreload" href="/assets/app.1a7b2683.js"><link rel="modulepreload" href="/assets/firewalld.html.8d7a8f55.js"><link rel="modulepreload" href="/assets/firewalld.html.2ad9b198.js">
    <link rel="stylesheet" href="/assets/style.bc9864ce.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/egg.png" alt="Peiiiiçš„ä¸ªäººç½‘ç«™"><span class="site-name can-hide">Peiiiiçš„ä¸ªäººç½‘ç«™</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/links.html" class="nav-link" aria-label="é“¾æ¥"><!--[--><!--]--> é“¾æ¥ <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/projects/" class="nav-link" aria-label="é¡¹ç›®"><!--[--><!--]--> é¡¹ç›® <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/computer/" class="nav-link" aria-label="è®¡ç®—æœº"><!--[--><!--]--> è®¡ç®—æœº <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/devops/" class="nav-link router-link-active" aria-label="DevOps"><!--[--><!--]--> DevOps <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/frontend/" class="nav-link" aria-label="å‰ç«¯"><!--[--><!--]--> å‰ç«¯ <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/backend/" class="nav-link" aria-label="åç«¯"><!--[--><!--]--> åç«¯ <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/algorithms/" class="nav-link" aria-label="ç®—æ³•"><!--[--><!--]--> ç®—æ³• <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/tools/" class="nav-link" aria-label="å¼€å‘å·¥å…·"><!--[--><!--]--> å¼€å‘å·¥å…· <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/cv.html" class="nav-link" aria-label="ç®€å†"><!--[--><!--]--> ç®€å† <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ›´å¤š"><span class="title">æ›´å¤š</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="æ›´å¤š"><span class="title">æ›´å¤š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/more/navigation.html" class="nav-link" aria-label="å¯¼èˆª ğŸ‰"><!--[--><!--]--> å¯¼èˆª ğŸ‰ <!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://shanyuhai123.github.io/vuepress-plugin-auto-sidebar/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress ä¾§è¾¹æ æ’ä»¶"><!--[--><!--]--> VuePress ä¾§è¾¹æ æ’ä»¶ <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://vuepress.vuejs.org/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress å®˜ç½‘"><!--[--><!--]--> VuePress å®˜ç½‘ <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/peiiii/peiiii.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="é¦–é¡µ"><!--[--><!--]--> é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/links.html" class="nav-link" aria-label="é“¾æ¥"><!--[--><!--]--> é“¾æ¥ <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/projects/" class="nav-link" aria-label="é¡¹ç›®"><!--[--><!--]--> é¡¹ç›® <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/computer/" class="nav-link" aria-label="è®¡ç®—æœº"><!--[--><!--]--> è®¡ç®—æœº <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/devops/" class="nav-link router-link-active" aria-label="DevOps"><!--[--><!--]--> DevOps <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/frontend/" class="nav-link" aria-label="å‰ç«¯"><!--[--><!--]--> å‰ç«¯ <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/backend/" class="nav-link" aria-label="åç«¯"><!--[--><!--]--> åç«¯ <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/algorithms/" class="nav-link" aria-label="ç®—æ³•"><!--[--><!--]--> ç®—æ³• <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/tools/" class="nav-link" aria-label="å¼€å‘å·¥å…·"><!--[--><!--]--> å¼€å‘å·¥å…· <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/cv.html" class="nav-link" aria-label="ç®€å†"><!--[--><!--]--> ç®€å† <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ›´å¤š"><span class="title">æ›´å¤š</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="æ›´å¤š"><span class="title">æ›´å¤š</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/more/navigation.html" class="nav-link" aria-label="å¯¼èˆª ğŸ‰"><!--[--><!--]--> å¯¼èˆª ğŸ‰ <!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://shanyuhai123.github.io/vuepress-plugin-auto-sidebar/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress ä¾§è¾¹æ æ’ä»¶"><!--[--><!--]--> VuePress ä¾§è¾¹æ æ’ä»¶ <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://vuepress.vuejs.org/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress å®˜ç½‘"><!--[--><!--]--> VuePress å®˜ç½‘ <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/peiiii/peiiii.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h2 id="ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä»‹ç»" aria-hidden="true">#</a> ä»‹ç»</h2><p>firewalld æ˜¯ CentOS 7 æ–°å¢çš„ç‰¹æ€§ï¼Œå…¶æ”¯æŒåŠ¨æ€æ›´æ–°ï¼Œä¸”æ·»åŠ äº†é˜²ç«å¢™ &quot;zones&quot; çš„æ¦‚å¿µã€‚</p><p>firewalld ä¸ iptables è‡ªèº«å¹¶ä¸å…·å¤‡é˜²ç«å¢™çš„åŠŸèƒ½ï¼Œéƒ½éœ€è¦é€šè¿‡å†…æ ¸çš„ netfilter æ¥å®ç°ï¼Œå®ƒä»¬çš„ä½œç”¨éƒ½æ˜¯ç»´æŠ¤è¿‡æ»¤çš„è§„åˆ™ã€‚</p><p>firewalld çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨ <code>/usr/lib/firewalld/</code> å’Œ <code>/etc/firewalld/</code> é‡Œçš„ XML æ–‡ä»¶ä¸­ã€‚</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token comment"># å®‰è£…</span>
yum <span class="token function">install</span> firewalld firewall-config
</code></pre></div><h2 id="æŒ‡ä»¤" tabindex="-1"><a class="header-anchor" href="#æŒ‡ä»¤" aria-hidden="true">#</a> æŒ‡ä»¤</h2><blockquote><p>å¯èƒ½éœ€è¦å…ˆä½¿ç”¨ systemctl å¥—ä»¶å¯ç”¨æœåŠ¡ã€‚</p><p>é™¤äº†ä½¿ç”¨å‘½ä»¤æ ¼å¼å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ GUIï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ç™»å½•æ—¶éœ€è¦ <code>ssh -Y user@ip</code> ã€‚</p></blockquote><div class="custom-container danger"><p class="custom-container-title">DANGER</p><p>firewall-cmd [Options ... ]</p></div><h3 id="_1-çŠ¶æ€é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#_1-çŠ¶æ€é€‰é¡¹" aria-hidden="true">#</a> 1. çŠ¶æ€é€‰é¡¹</h3><table><thead><tr><th>option</th><th>effect</th></tr></thead><tbody><tr><td>--state</td><td>firewalld çš„çŠ¶æ€ã€‚</td></tr><tr><td>--reload</td><td>ä¸ä¸­æ–­æœåŠ¡çš„é‡æ–°åŠ è½½ã€‚</td></tr><tr><td>--complete-reload</td><td>ä¸­æ–­æ‰€æœ‰è¿æ¥çš„é‡æ–°åŠ è½½ã€‚</td></tr><tr><td>--runtime-to-permanent</td><td>å°†å½“å‰é˜²ç«å¢™çš„è§„åˆ™æ°¸ä¹…ä¿å­˜ã€‚</td></tr><tr><td>--check-config</td><td>æ£€æŸ¥é…ç½®æ­£ç¡®æ€§ã€‚</td></tr></tbody></table><h3 id="_2-æ—¥å¿—é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#_2-æ—¥å¿—é€‰é¡¹" aria-hidden="true">#</a> 2. æ—¥å¿—é€‰é¡¹</h3><table><thead><tr><th>option</th><th>effect</th></tr></thead><tbody><tr><td>--get-log-denied</td><td>è·å–è®°å½•è¢«æ‹’ç»çš„æ—¥å¿—ã€‚</td></tr><tr><td>--set-log-denied=value</td><td>è®¾ç½®è®°å½•è¢«æ‹’ç»çš„æ—¥å¿—ï¼Œåªèƒ½ä¸º &#39;all&#39;,&#39;unicast&#39;,&#39;broadcast&#39;,&#39;multicast&#39;,&#39;off&#39; å…¶ä¸­çš„ä¸€ä¸ªã€‚</td></tr></tbody></table><h2 id="æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#æ“ä½œ" aria-hidden="true">#</a> æ“ä½œ</h2><p>åœ¨å¼€å§‹æ“ä½œå‰éœ€è¦å¯¹ zone æœ‰ä¸€å®šçš„äº†è§£ã€‚</p><table><thead><tr><th>zone</th><th>zh</th><th>effect</th></tr></thead><tbody><tr><td>drop</td><td>ä¸¢å¼ƒ</td><td>ä»»ä½•æ¥æ”¶çš„ç½‘ç»œæ•°æ®åŒ…éƒ½è¢«ä¸¢å¼ƒï¼Œæ²¡æœ‰ä»»ä½•å›å¤ã€‚ä»…èƒ½æœ‰å‘é€å‡ºå»çš„ç½‘ç»œè¿æ¥ã€‚</td></tr><tr><td>block</td><td>é™åˆ¶</td><td>ä»»ä½•æ¥æ”¶çš„ç½‘ç»œè¿æ¥éƒ½è¢« <code>IPv4</code> çš„ icmp-host-prohibited ä¿¡æ¯å’Œ <code>IPv6</code> çš„ icmp6-adm-prohibited ä¿¡æ¯æ‰€æ‹’ç»ã€‚</td></tr><tr><td>public</td><td>å…¬å…±</td><td>åœ¨å…¬å…±åŒºåŸŸå†…ä½¿ç”¨ï¼Œä¸èƒ½ç›¸ä¿¡ç½‘ç»œå†…çš„å…¶ä»–è®¡ç®—æœºä¸ä¼šå¯¹æ‚¨çš„è®¡ç®—æœºé€ æˆå±å®³ï¼Œåªèƒ½æ¥æ”¶ç»è¿‡é€‰å–çš„è¿æ¥ã€‚</td></tr><tr><td>external</td><td>å¤–éƒ¨</td><td>ç‰¹åˆ«æ˜¯ä¸ºè·¯ç”±å™¨å¯ç”¨äº†ä¼ªè£…åŠŸèƒ½çš„å¤–éƒ¨ç½‘ã€‚æ‚¨ä¸èƒ½ä¿¡ä»»æ¥è‡ªç½‘ç»œçš„å…¶ä»–è®¡ç®—ï¼Œä¸èƒ½ç›¸ä¿¡å®ƒä»¬ä¸ä¼šå¯¹æ‚¨çš„è®¡ç®—æœºé€ æˆå±å®³ï¼Œåªèƒ½æ¥æ”¶ç»è¿‡é€‰æ‹©çš„è¿æ¥ã€‚</td></tr><tr><td>dmz</td><td>éå†›äº‹åŒº</td><td>ç”¨äºæ‚¨çš„éå†›äº‹åŒºå†…çš„ç”µè„‘ï¼Œæ­¤åŒºåŸŸå†…å¯å…¬å¼€è®¿é—®ï¼Œå¯ä»¥æœ‰é™åœ°è¿›å…¥æ‚¨çš„å†…éƒ¨ç½‘ç»œï¼Œä»…ä»…æ¥æ”¶ç»è¿‡é€‰æ‹©çš„è¿æ¥ã€‚</td></tr><tr><td>work</td><td>å·¥ä½œ</td><td>ç”¨äºå·¥ä½œåŒºã€‚æ‚¨å¯ä»¥åŸºæœ¬ç›¸ä¿¡ç½‘ç»œå†…çš„å…¶ä»–ç”µè„‘ä¸ä¼šå±å®³æ‚¨çš„ç”µè„‘ã€‚ä»…ä»…æ¥æ”¶ç»è¿‡é€‰æ‹©çš„è¿æ¥ã€‚</td></tr><tr><td>home</td><td>å®¶åº­</td><td>ç”¨äºå®¶åº­ç½‘ç»œã€‚æ‚¨å¯ä»¥åŸºæœ¬ä¿¡ä»»ç½‘ç»œå†…çš„å…¶ä»–è®¡ç®—æœºä¸ä¼šå±å®³æ‚¨çš„è®¡ç®—æœºã€‚ä»…ä»…æ¥æ”¶ç»è¿‡é€‰æ‹©çš„è¿æ¥ã€‚</td></tr><tr><td>internal</td><td>å†…éƒ¨</td><td>ç”¨äºå†…éƒ¨ç½‘ç»œã€‚æ‚¨å¯ä»¥åŸºæœ¬ä¸Šä¿¡ä»»ç½‘ç»œå†…çš„å…¶ä»–è®¡ç®—æœºä¸ä¼šå¨èƒæ‚¨çš„è®¡ç®—æœºã€‚ä»…ä»…æ¥å—ç»è¿‡é€‰æ‹©çš„è¿æ¥ã€‚</td></tr><tr><td>trusted</td><td>ä¿¡ä»»</td><td>å¯æ¥å—æ‰€æœ‰çš„ç½‘ç»œè¿æ¥ã€‚</td></tr></tbody></table><p><code>firewalld</code> é‡Œçš„é»˜è®¤åŒºåŸŸè¢«è®¾å®šä¸ºå…¬å…±åŒºåŸŸã€‚</p><h3 id="_1-service" tabindex="-1"><a class="header-anchor" href="#_1-service" aria-hidden="true">#</a> 1. service</h3><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token comment"># æ˜¾ç¤ºæ”¯æŒçš„ zone åˆ—è¡¨ï¼š</span>
firewall-cmd --get-zones
<span class="token comment"># æŸ¥çœ‹æ‰€æœ‰ zone è¯¦æƒ…ï¼š</span>
firewall-cmd --list-all-zones
<span class="token comment"># æŸ¥çœ‹æŸä¸€ zone è¯¦æƒ…ï¼š</span>
firewall-cmd --zone<span class="token operator">=</span>public --list-all
<span class="token comment"># æŸ¥çœ‹é»˜è®¤ zoneï¼š</span>
firewall-cmd --get-default-zone
<span class="token comment"># æ˜¾ç¤ºæ‰€æœ‰ servicesï¼š</span>
firewall-cmd --get-services
<span class="token comment"># æŸ¥çœ‹æŸä¸€æœåŠ¡ï¼ˆè¿”å› yes/noï¼‰ï¼š</span>
firewall-cmd --query-service<span class="token operator">=</span><span class="token operator">&lt;</span>service name<span class="token operator">&gt;</span>
firewall-cmd --query-service<span class="token operator">=</span>http <span class="token comment"># no / 80</span>
<span class="token comment"># æ˜¾ç¤ºå½“å‰ serviceï¼š</span>
firewall-cmd --list-services
<span class="token comment"># æ·»åŠ æœåŠ¡ï¼š</span>
firewall-cmd --add-service<span class="token operator">=</span><span class="token operator">&lt;</span>service name<span class="token operator">&gt;</span>
<span class="token comment"># åˆ é™¤æœåŠ¡ï¼š</span>
firewall-cmd --remove-service<span class="token operator">=</span><span class="token operator">&lt;</span>service name<span class="token operator">&gt;</span>
<span class="token comment"># å…è®¸SSHæœåŠ¡é€šè¿‡ï¼š</span>
firewall-cmd --enable <span class="token assign-left variable">service</span><span class="token operator">=</span>ssh
<span class="token comment"># ç¦æ­¢SSHæœåŠ¡é€šè¿‡ï¼š</span>
firewall-cmd --disable <span class="token assign-left variable">service</span><span class="token operator">=</span>ssh
<span class="token comment"># æ·»åŠ æœåŠ¡è‡³ zoneï¼š</span>
firewall-cmd --zone<span class="token operator">=</span>public --add-service<span class="token operator">=</span><span class="token operator">&lt;</span>service name<span class="token operator">&gt;</span> --permanent
</code></pre></div><h3 id="_2-port" tabindex="-1"><a class="header-anchor" href="#_2-port" aria-hidden="true">#</a> 2. port</h3><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token comment"># æŸ¥çœ‹æ‰€æœ‰ç«¯å£ï¼š</span>
firewall-cmd --list-port
<span class="token comment"># æŸ¥çœ‹æŸä¸ªç«¯å£ï¼š</span>
firewall-cmd --query-port<span class="token operator">=</span><span class="token number">22</span>/tcp
<span class="token comment"># æ·»åŠ æŸä¸ªç«¯å£ï¼š</span>
firewall-cmd --add-port<span class="token operator">=</span><span class="token number">22</span>/tcp --permanent  
<span class="token comment"># åˆ é™¤æŸä¸ªç«¯å£ï¼š</span>
firewall-cmd --remove-port<span class="token operator">=</span><span class="token number">22</span>/tcp

<span class="token comment"># å°† 80 ç«¯å£çš„æµé‡è½¬å‘è‡³ 8080ï¼š</span>
firewall-cmd --add-forward-port<span class="token operator">=</span>port<span class="token operator">=</span><span class="token number">80</span>:proto<span class="token operator">=</span>tcp:toport<span class="token operator">=</span><span class="token number">8080</span>   
</code></pre></div><h3 id="_3-ip" tabindex="-1"><a class="header-anchor" href="#_3-ip" aria-hidden="true">#</a> 3. IP</h3><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token comment"># æ£€æŸ¥æ˜¯å¦å…è®¸ä¼ªè£… IPï¼š</span>
firewall-cmd --query-masquerade
<span class="token comment"># å…è®¸é˜²ç«å¢™ä¼ªè£… IPï¼š</span>
firewall-cmd --add-masquerade
<span class="token comment"># ç¦æ­¢é˜²ç«å¢™ä¼ªè£… IPï¼š</span>
firewall-cmd --remove-masquerade

<span class="token comment"># å°ç¦æŸä¸ª IPï¼š</span>
firewall-cmd --permanent --add-rich-rule<span class="token operator">=</span><span class="token string">&#39;rule family=ipv4 source address=&quot;ip&quot; drop&#39;</span>
</code></pre></div><h3 id="_4-rich-rule" tabindex="-1"><a class="header-anchor" href="#_4-rich-rule" aria-hidden="true">#</a> 4. rich-rule</h3><p>å¤šè§„åˆ™å‘½ä»¤çš„æ ¼å¼æˆ–ç»“æ„å¦‚ä¸‹ï¼ˆåŠ<a href="https://access.redhat.com/documentation/zh_cn/red_hat_enterprise_linux/7/html/security_guide/sec-using_firewalls#Configuring_Complex_Firewall_Rules_with_the_Rich-Language_Syntax" target="_blank" rel="noopener noreferrer">è§£é‡Š<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>ï¼‰ï¼š</p><div class="language-bash ext-sh"><pre class="language-bash"><code>rule <span class="token punctuation">[</span>family<span class="token operator">=</span><span class="token string">&quot;&lt;rule family&gt;&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span> <span class="token builtin class-name">source</span> <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token string">&quot;&lt;address&gt;&quot;</span> <span class="token punctuation">[</span>invert<span class="token operator">=</span><span class="token string">&quot;True&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">]</span>
    <span class="token punctuation">[</span> destination <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token string">&quot;&lt;address&gt;&quot;</span> <span class="token punctuation">[</span>invert<span class="token operator">=</span><span class="token string">&quot;True&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">]</span>
    <span class="token punctuation">[</span> <span class="token operator">&lt;</span>element<span class="token operator">&gt;</span> <span class="token punctuation">]</span>
    <span class="token punctuation">[</span> log <span class="token punctuation">[</span>prefix<span class="token operator">=</span><span class="token string">&quot;&lt;prefix text&gt;&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>level<span class="token operator">=</span><span class="token string">&quot;&lt;log level&gt;&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>limit <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token string">&quot;rate/duration&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">]</span>
    <span class="token punctuation">[</span> audit <span class="token punctuation">]</span>
    <span class="token punctuation">[</span> accept<span class="token operator">|</span>reject<span class="token operator">|</span>drop <span class="token punctuation">]</span>
</code></pre></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/peiiii/peiiii.github.io/edit/master/docs/devops/linux/firewalld.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ–‡æ¡£ï¼"><!--[--><!--]--> ç¼–è¾‘æ–‡æ¡£ï¼ <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">ä¸Šæ¬¡æ›´æ–°: </span><span class="meta-item-info">2021/8/19 ä¸Šåˆ9:53:34</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.1a7b2683.js" defer></script>
  </body>
</html>
